mysql:
  services:
    mysql:
      charm: "cs:~justin-fathomdb/trusty/mysql"
      num_units: <<
      exposed: true
      options:
        performance: <<
        slow-query-time: <<
    slave:
      charm: "cs:~justin-fathomdb/trusty/mysql"
      num_units: 2
    stubclient:
      charm: "cs:~justin-fathomdb/trusty/stub-client"
    stubclient2:
      charm: "cs:~justin-fathomdb/trusty/stub-client"
    metrics:
      charm: "cs:~justin-fathomdb/trusty/heka-collector"
  relations:
    - - "stubclient:juju-info"
      - "mysql:juju-info"
    - - "stubclient:db"
      - "mysql:db"

    - - "mysql:master"
      - "slave:slave"

    - - "stubclient2:juju-info"
      - "slave:juju-info"
    - - "stubclient2:db"
      - "slave:db"

    - - "metrics:juju-info"
      - "mysql:juju-info"
    - - "metrics:elasticsearch"
      - "{{.SystemServices.elasticsearch}}:cluster"
